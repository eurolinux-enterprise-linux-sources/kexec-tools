From 555943348e649d2c187189f7690a98555a4b3251 Mon Sep 17 00:00:00 2001
From: Atsushi Kumagai <ats-kumagai@wm.jp.nec.com>
Date: Wed, 10 Jan 2018 11:56:31 +0900
Subject: [PATCH] [PATCH] Support newer kernels.

A new makedumpfile supports newer kernels:

      - 4.12, 4.13, 4.14   (x86 FLATMEM)
      - 4.12, 4.13, 4.14   (x86 SPARSEMEM)
      - 4.12, 4.13, 4.14   (x86_64 SPARSEMEM)

Signed-off-by: Atsushi Kumagai <ats-kumagai@wm.jp.nec.com>
Signed-off-by: Pingfan Liu <piliu@redhat.com>
---
 README         | 3 +++
 makedumpfile.h | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/makedumpfile-1.6.2/README b/makedumpfile-1.6.2/README
index 8de4dc6..c3eeefe 100644
--- a/makedumpfile-1.6.2/README
+++ b/makedumpfile-1.6.2/README
@@ -119,6 +119,9 @@
   4.9    | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
   4.10   | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
   4.11   | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
+  4.12   | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
+  4.13   | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
+  4.14   | OK | ** |    |    |    | ** |    | -- | OK | OK |    |    |
 
   OK    : Support.
   --    : Not support.
diff --git a/makedumpfile-1.6.2/makedumpfile.h b/makedumpfile-1.6.2/makedumpfile.h
index c1f779a..50aaffa 100644
--- a/makedumpfile-1.6.2/makedumpfile.h
+++ b/makedumpfile-1.6.2/makedumpfile.h
@@ -478,7 +478,7 @@ do { \
 #define KVER_MIN_SHIFT 16
 #define KERNEL_VERSION(x,y,z) (((x) << KVER_MAJ_SHIFT) | ((y) << KVER_MIN_SHIFT) | (z))
 #define OLDEST_VERSION		KERNEL_VERSION(2, 6, 15)/* linux-2.6.15 */
-#define LATEST_VERSION		KERNEL_VERSION(4, 11, 7)/* linux-4.11.7 */
+#define LATEST_VERSION		KERNEL_VERSION(4, 14, 8)/* linux-4.14.8 */
 
 /*
  * vmcoreinfo in /proc/vmcore
-- 
2.7.4

